<% breadcrumb :accesses, @box %>

<div class="container">
  <section class="boxes">
    <div class="row">
      <div class="col-lg-6 col-lg-offset-3 col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1 col-xs-12">
        <h1>Accesses</h1>
        <p>
          List of user that has access to <b><%= @box.label %></b> box.
        </p>
        <%= render "dashboard/shared/flash" %>
        <table class="table table-striped table-hover ">
          <thead>
            <tr>
              <th>#</th>
              <th>User</th>
              <th>Role</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <% @accesses.each_with_index do |access, index| %>
              <tr>
                <td><%= index + 1 %></td>
                <td><%= access.user.email %></td>
                <td><%= access.role.capitalize %></td>
                <td>
                  <%= link_to '<i class="material-icons md-18 md-dark">edit</i>'.html_safe,
                               "edit_dashboard_box_path(box)",
                               data: {toggle: 'modal', target: '#edit-box'}, remote: true %>
                </td>
              <tr>
            <% end %>
          </tbody>
        </table>

      </div>
    </div>
  </section>
</div>

<!-- fab btn -->
<div class="abs-fab">
  <a href="<%= new_dashboard_box_access_path %>" class="btn btn-info btn-fab">
    <i class="material-icons">add</i>
  </a>
</div>
<!-- .fab btn -->

<!-- dialogs -->
<div id="edit-box" class="modal"></div>
<!-- .dialogs -->
